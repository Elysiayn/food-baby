(this["webpackJsonpfood-baby"]=this["webpackJsonpfood-baby"]||[]).push([[0],{161:function(e,n,t){},197:function(e,n,t){},215:function(e,n,t){},224:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(84),i=t.n(r),s=(t(197),t(16)),o=t(36),l=t(25),u=t(40),d=t(177),j=t(61),b=t(248),m=t(245),h=t(64),O=t(41),p=t.n(O),f=t(58),g=t(67),x=t(14),v=t(241),w=t(226),y=t(24),k=t(165),I=t.n(k),N="ADD_TO_CART",C="ADD_MULTIPLE_TO_CART",_="REMOVE_FROM_CART",S="UPDATE_CART_QUANTITY",E="TOGGLE_CART",T="UPDATE_ACTIVE_INDEX",A="UPDATE_ALL_COURSES",U="UPDATE_CURRENT_MENU_ITEM",P="UPDATE_MENU_ITEMS",$="UPDATE_USER",D=t(179),F=t(81),L=function(e,n){switch(n.type){case N:return Object(x.a)(Object(x.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(F.a)(e.cart),[n.menuItem])});case C:return Object(x.a)(Object(x.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(F.a)(e.cart),Object(F.a)(n.menuItems))});case _:var t=e.cart.filter((function(e){return e._id!==n._id}));return Object(x.a)(Object(x.a)({},e),{},{cartOpen:t.length>0,cart:t});case S:return Object(x.a)(Object(x.a)({},e),{},{cartOpen:!0,cart:e.cart.map((function(e){return n._id===e._id&&(e.purchaseQuantity=n.purchaseQuantity),e}))});case"CLEAR_CART":return Object(x.a)(Object(x.a)({},e),{},{cartOpen:!1,cart:[]});case E:return Object(x.a)(Object(x.a)({},e),{},{cartOpen:!e.cartOpen});case T:return Object(x.a)(Object(x.a)({},e),{},{activeIndex:n.activeIndex});case A:return Object(x.a)(Object(x.a)({},e),{},{allCourses:Object(F.a)(n.allCourses)});case"UPDATE_CURRENT_COURSE":return Object(x.a)(Object(x.a)({},e),{},{currentCourse:n.currentCourse});case U:return Object(x.a)(Object(x.a)({},e),{},{itemPreview:Object(x.a)({},n.itemPreview)});case P:return Object(x.a)(Object(x.a)({},e),{},{menuItems:Object(F.a)(n.menuItems)});case $:return Object(x.a)(Object(x.a)({},e),{},{user:Object(x.a)({},n.user)});default:return e}};var M,z,R,Q,B,H,q=t(3),W=Object(a.createContext)(),G=W.Provider,J=function(e){e.value;var n,t=Object(D.a)(e,["value"]),c=(n={activeIndex:"",allCourses:[],cart:[],cartOpen:!1,currentCourse:"",itemPreview:{},menuItems:[],user:{}},Object(a.useReducer)(L,n)),r=Object(s.a)(c,2),i=r[0],o=r[1];return Object(q.jsx)(G,Object(x.a)({value:[i,o]},t))},Y=function(){return Object(a.useContext)(W)},V=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],a=n[1];return Object(q.jsx)(I.a,{accept:"image/*",name:"image",storageRef:j.a.storage().ref("images"),onUploadError:function(e){return console.log(e)},onUploadSuccess:function(e){j.a.storage().ref("images").child(e).getDownloadURL().then((function(e){return a({type:U,itemPreview:Object(x.a)(Object(x.a)({},t.itemPreview),{},{image:e})})}))}})},K=t(29),X=t(43),Z=t.n(X),ee=Z()(M||(M=Object(K.a)(["\n    mutation login($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n            token\n            user {\n                _id\n            }\n        }\n    }\n"]))),ne=Z()(z||(z=Object(K.a)(["\n    mutation addMenuItem($menuItem: MenuItemInput) {\n        addMenuItem(menuItem: $menuItem) {\n            _id\n            name\n            description\n            image\n            price\n            course {\n                _id\n                name\n            }\n        }\n    }\n\n"]))),te=Z()(R||(R=Object(K.a)(["\n    mutation addUser($firstName: String!, $lastName: String!, $email: String!, $password: String!) {\n        addUser(firstName: $firstName, lastName: $lastName, email: $email, password: $password) {\n            token\n            user {\n                _id\n            }\n        }\n    }\n"]))),ae=Z()(Q||(Q=Object(K.a)(["\n    mutation addOrder($menuItems: [ID]!) {\n        addOrder(menuItems: $menuItems) {\n            _id\n            purchaseDate\n            menuItems {\n                _id\n                name\n                description\n                price\n                course {\n                    _id\n                    name\n                }\n            }\n        }\n    }\n"]))),ce=Z()(B||(B=Object(K.a)(["\n    mutation deleteMenuItem($_id: ID!) {\n        deleteMenuItem(_id: $_id) {\n            _id\n        }\n    }\n"]))),re=(Z()(H||(H=Object(K.a)(["\n    mutation updateMenuItem($_id: ID!, $name: String, $description: String, $price: Int) {\n        updateMenuItem(_id: $_id, name: $name, description: $description, price: $price) {\n            _id\n            name\n            description\n            image\n            price\n            course {\n                _id\n                name\n            }\n        }\n    }\n"]))),function(e){var n=Y(),t=Object(s.a)(n,2),a=t[0],c=t[1],r=a.itemPreview,i=e.index,o=Object(y.b)(ne),l=Object(s.a)(o,1)[0],u=function(e){var n=e.target,t=n.name,a=n.value;switch(!0){case"option"===e.target.getAttribute("role"):var i=e.target.querySelector("span").textContent;c({type:U,itemPreview:Object(x.a)(Object(x.a)({},r),{},{course:i})});break;case"price"===t:var s=parseInt(a);c({type:U,itemPreview:Object(x.a)(Object(x.a)({},r),{},{price:s})});break;default:c({type:U,itemPreview:Object(x.a)(Object(x.a)({},r),{},Object(g.a)({},t,a))})}},d=function(){var e=Object(f.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l({variables:{menuItem:r}});case 4:return t=e.sent,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}();return Object(q.jsx)(m.a.Content,{active:a.activeIndex===i,children:Object(q.jsxs)(v.a,{onSubmit:d,children:[Object(q.jsx)(v.a.Input,{label:"Name",name:"name",placeholder:"Enter the name of the menu item",onChange:u}),Object(q.jsxs)(v.a.Group,{widths:"equal",children:[Object(q.jsxs)(v.a.Field,{children:[Object(q.jsx)("label",{htmlFor:"form-price",children:"Price"}),Object(q.jsx)("input",{type:"number",name:"price",min:"0",onChange:u,id:"form-price"})]}),Object(q.jsx)(v.a.Select,{fluid:!0,label:"Course",name:"course",placeholder:"Select the Course",options:[{key:"0",value:"appetizers",text:"appetizers"},{key:"1",value:"mains",text:"mains"},{key:"2",value:"desserts",text:"desserts"},{key:"3",value:"drinks",text:"drinks"}],onChange:u})]}),Object(q.jsxs)(v.a.Field,{children:[Object(q.jsx)("label",{htmlFor:"form-image-upload",children:"Image"}),Object(q.jsx)(V,{})]}),Object(q.jsx)(v.a.TextArea,{label:"Description",name:"description",placeholder:"Enter a short description of the menu item.",onChange:u}),Object(q.jsx)(w.a,{type:"submit",children:"Save"})]})})}),ie=t(242);function se(e){var n=[" ","-",'"'];e=e.toLowerCase();for(var t=0;t<n.length;t++)e=e.split(n[t]).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(n[t]);return e}function oe(e,n,t){return new Promise((function(a,c){var r,i,s,o=window.indexedDB.open("food-baby",1);o.onupgradeneeded=function(e){var n=o.result;n.createObjectStore("menuItems",{keyPath:"_id"}),n.createObjectStore("courses",{keyPath:"_id"}),n.createObjectStore("cart",{keyPath:"_id"})},o.onerror=function(e){console.log("There was an error.")},o.onsuccess=function(c){switch(r=o.result,i=r.transaction(e,"readwrite"),s=i.objectStore(e),r.onerror=function(e){console.log("error",e)},n){case"put":s.put(t),a(t);break;case"get":var l=s.getAll();l.onsuccess=function(){a(l.result)};break;case"delete":s.delete(t._id);break;default:console.log("Not a valid method.")}i.oncomplete=function(){r.close()}}}))}var le,ue,de,je,be,me=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(y.b)(ce),r=Object(s.a)(c,1)[0];if(t.menuItems.length<1){var i=JSON.parse(localStorage.getItem("menuItems"));a({type:P,menuItems:i})}var o=function(e){var n=e.target.getAttribute("data-id");r({variables:{_id:n}})};return Object(q.jsx)(m.a.Content,{active:0===t.activeIndex,children:Object(q.jsxs)(ie.a,{striped:!0,selectable:!0,compact:!0,children:[Object(q.jsxs)(ie.a.Header,{children:[Object(q.jsx)(ie.a.HeaderCell,{children:"Name"}),Object(q.jsx)(ie.a.HeaderCell,{children:"Price"}),Object(q.jsx)(ie.a.HeaderCell,{children:"Course"}),Object(q.jsx)(ie.a.HeaderCell,{className:"edit-cell",children:"Edit / Delete"})]}),Object(q.jsx)(ie.a.Body,{children:t.menuItems.map((function(e){return Object(q.jsxs)(ie.a.Row,{children:[Object(q.jsx)(ie.a.Cell,{children:se(e.name)}),Object(q.jsxs)(ie.a.Cell,{children:["$",e.price]}),Object(q.jsx)(ie.a.Cell,{children:e.course.name}),Object(q.jsxs)(ie.a.Cell,{className:"edit-cell",children:[Object(q.jsx)(h.a,{name:"edit"}),"/",Object(q.jsx)(h.a,{name:"delete","data-id":e._id,onClick:o})]})]})}))})]})})},he=t(249),Oe=function(){var e=Y(),n=Object(s.a)(e,1)[0];return Object(a.useEffect)((function(){var e=document.querySelector(".preview-area"),t=n.itemPreview;if(Object.keys(t).length){var a=t.name?t.name:"Item Name",c=t.price?"$".concat(t.price):"Set a price",r=t.course?t.course:"pick a course",i=t.image?"<img src=".concat(t.image," alt=").concat(t.name," />"):"Upload an image!",s=t.description?t.description:"Give your menu item a short description.";e.innerHTML="\n                <h3>".concat(se(a),'</h3>\n                <div>\n                    <span class="preview-price">').concat(c,"</span>, ").concat(r,'\n                </div>\n                <div class="preview-image">').concat(i,"</div>\n                <div class='preview-description'>").concat(s,"</div>\n            ")}}),[n]),Object(q.jsx)("div",{className:"preview-area",children:Object(q.jsx)(b.a,{placeholder:!0,className:"menu-placeholder",children:Object(q.jsxs)(he.a,{icon:!0,children:[Object(q.jsx)(h.a,{name:"utensils"}),"Preview your new menu item here."]})})})},pe=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],a=n[1],c=function(e){e===t.activeIndex?a({type:T,activeIndex:-1}):a({type:T,activeIndex:e})};return Object(q.jsxs)(b.a.Group,{horizontal:!0,children:[Object(q.jsx)(b.a,{className:"dashboard-left",children:Object(q.jsxs)(m.a,{fluid:!0,styled:!0,children:[Object(q.jsxs)(m.a.Title,{active:0===t.activeIndex,onClick:function(){return c(0)},children:[Object(q.jsx)(h.a,{name:"dropdown"}),"Current Menu"]}),Object(q.jsx)(me,{}),Object(q.jsxs)(m.a.Title,{active:1===t.activeIndex,onClick:function(){return c(1)},children:[Object(q.jsx)(h.a,{name:"dropdown"}),"Add Menu Item"]}),Object(q.jsx)(re,{index:1})]})}),Object(q.jsx)(b.a,{children:Object(q.jsx)(Oe,{})})]})},fe=t(250),ge=t(247),xe=t(239),ve=t(240),we=t(243),ye=t(171),ke=t(238),Ie=function(e){var n=e.item,t=Y(),a=Object(s.a)(t,2)[1];return Object(q.jsx)("div",{className:"flex-row",children:Object(q.jsxs)("div",{children:[Object(q.jsx)(he.a,{size:"small",children:n.name}),"$",n.price,Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{children:"Qty: "}),Object(q.jsx)(ke.a,{type:"number",placeholder:"1",value:n.purchaseQuantity,onChange:function(e){var t=e.target.value;t<1?(a({type:_,_id:n._id}),oe("cart","delete",Object(x.a)({},n))):(a({type:S,_id:n._id,purchaseQuantity:parseInt(t)}),oe("cart","put",Object(x.a)(Object(x.a)({},n),{},{purchaseQuantity:parseInt(t)})))}}),Object(q.jsx)("span",{role:"img","aria-label":"trash",onClick:function(){return a({type:_,_id:n._id}),void oe("cart","delete",Object(x.a)({},n))},children:"\ud83d\uddd1\ufe0f"})]})]})})},Ne=Z()(le||(le=Object(K.a)(["\n   { \n       course {\n        _id\n        name\n    }\n}\n"]))),Ce=Z()(ue||(ue=Object(K.a)(["\n    query menuItem($_id: ID!) {\n        menuItem(_id: $_id) {\n            _id\n            name\n            description\n            price\n            course {\n                _id\n                name\n            }\n        }\n    }\n"]))),_e=Z()(de||(de=Object(K.a)(["\n{    \n    menuItems {\n        _id\n        name\n        description\n        price\n        image\n        course {\n            _id\n            name\n        }\n    }\n}\n"]))),Se=Z()(je||(je=Object(K.a)(["\n    {\n        user {\n            _id\n            firstName\n            lastName\n            role\n            orders {\n                _id\n                purchaseDate\n                menuItems {\n                    _id\n                    name\n                    description\n                    price\n                    course {\n                        _id\n                        name\n                    }\n                }\n            }\n            favorites {\n                _id\n                name\n                description\n                price\n                course {\n                    _id\n                    name\n                }\n            }\n        }\n    }\n"]))),Ee=Z()(be||(be=Object(K.a)(["\n    query getCheckout($menuItems: [ID]!) {\n        checkout(menuItems: $menuItems) {\n            session\n        }\n    }\n"]))),Te=t(172),Ae=t(173),Ue=t(153),Pe=t.n(Ue),$e=new(function(){function e(){Object(Te.a)(this,e)}return Object(Ae.a)(e,[{key:"getProfile",value:function(){return Pe()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Pe()(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),De=(t(215),Object(ye.a)("pk_test_TYooMQauvdEDq54NiTphI7jx")),Fe=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(y.a)(Ee),i=Object(s.a)(r,2),l=i[0],u=i[1].data;function d(){c({type:E})}return Object(a.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("cart","get");case 2:n=e.sent,c({type:C,menuItems:Object(F.a)(n)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.cart.length||function(){e.apply(this,arguments)}()}),[t.cart.length,c]),Object(a.useEffect)((function(){u&&De.then((function(e){e.redirectToCheckout({sessionId:u.checkout.session})}))}),[u]),t.cartOpen?Object(q.jsxs)(b.a,{className:"cart",children:[Object(q.jsx)("div",{className:"close",onClick:d,children:"[close]"}),Object(q.jsx)(he.a,{size:"medium",dividing:!0,children:"Current Order"}),t.cart.length?Object(q.jsxs)("div",{className:"cart-body",children:[Object(q.jsx)(we.a,{as:"ol",children:t.cart.map((function(e){return Object(q.jsx)(we.a.Item,{as:"li",children:Object(q.jsx)(Ie,{item:e},e._id)})}))}),Object(q.jsxs)("div",{className:"flex-row space-between",children:[Object(q.jsx)("p",{children:Object(q.jsxs)("strong",{children:["Total: $",function(){var e=0;return t.cart.forEach((function(n){e+=n.price*n.purchaseQuantity})),e.toFixed(2)}()]})}),Object(q.jsx)("p",{children:$e.loggedIn()?Object(q.jsxs)(w.a,{animated:"fade",onClick:function(){var e=[];t.cart.forEach((function(n){for(var t=0;t<n.purchaseQuantity;t++)e.push(n._id)})),l({variables:{menuItems:e}})},id:"cart-btn",children:[Object(q.jsx)(w.a.Content,{hidden:!0,children:"Checkout"}),Object(q.jsx)(w.a.Content,{visible:!0,children:Object(q.jsx)(h.a,{name:"shopping basket"})})]}):Object(q.jsx)(o.b,{className:"checkout-link",to:"/login",children:"(log in to check out)"})})]})]}):Object(q.jsxs)("h3",{children:[Object(q.jsx)("span",{role:"img","aria-label":"empty plate",children:"\ud83c\udf7d\ufe0f"}),"There's no food in your order yet!"]}),Object(q.jsx)("script",{src:"https://www.gstatic.com/firebasejs/8.3.2/firebase-messaging.js"})]}):Object(q.jsx)("div",{className:"cart-closed",onClick:d,children:Object(q.jsx)("span",{role:"img","aria-label":"takeout",children:"\ud83e\udd61"})})},Le=t(244),Me=t(178);var ze=function(e){var n=e._id,t=e.name,c=e.image,r=e.price,i=e.description,o=Object(y.c)(Ce),l=o.loading,u=o.data,d=Y(),j=Object(s.a)(d,2),b=j[0],m=j[1],O=b.cart;return Object(a.useEffect)((function(){u?(m({type:P,menuItems:u.menuItems}),u.menuItems.forEach((function(e){oe("menuItems","put",e)}))):l||oe("menuItems","get").then((function(e){m({type:P,menuItems:e})}))}),[u,l,m]),Object(q.jsxs)(Le.a,{children:[Object(q.jsx)(Me.a,{ui:!1,wrapped:!0,src:c}),Object(q.jsxs)(Le.a.Content,{className:"menu-cards",children:[Object(q.jsx)(Le.a.Header,{children:se(t)}),Object(q.jsxs)(Le.a.Meta,{children:["$",r]}),Object(q.jsx)(Le.a.Description,{children:i})]}),Object(q.jsxs)(w.a,{animated:"fade",onClick:function(){var t=O.find((function(e){return e._id===n}));t?(m({type:S,_id:n,purchaseQuantity:parseInt(t.purchaseQuantity)+1}),oe("cart","put",Object(x.a)(Object(x.a)({},t),{},{purchaseQuantity:parseInt(t.purchaseQuantity)+1}))):(m({type:N,menuItem:Object(x.a)(Object(x.a)({},e),{},{purchaseQuantity:1})}),oe("cart","put",Object(x.a)(Object(x.a)({},e),{},{purchaseQuantity:1})))},children:[Object(q.jsx)(w.a.Content,{hidden:!0,children:"Add To Order"}),Object(q.jsx)(w.a.Content,{visible:!0,children:Object(q.jsx)(h.a,{name:"utensils"})})]})]})};var Re=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(y.c)(_e),i=r.loading,o=r.data,l=Object(y.c)(Ne),u=l.loading,d=l.data;return localStorage.setItem("menuItems",JSON.stringify(t.menuItems)),Object(a.useEffect)((function(){switch(!0){case void 0!==d:c({type:A,allCourses:d.course}),d.course.forEach((function(e){oe("courses","put",e)}));break;case void 0!==o:c({type:P,menuItems:o.menuItems}),o.menuItems.forEach((function(e){oe("menuItems","put",e)}));break;default:oe("menuItems","get").then((function(e){c({type:P,menuItems:e})})),oe("courses","get").then((function(e){c({type:A,allCourses:e})}))}}),[o,i,u,d,c]),Object(q.jsxs)("div",{children:[Object(q.jsx)(he.a,{size:"large",className:"menu-title",children:"MENU"}),t.allCourses.map((function(e){return Object(q.jsxs)("div",{className:"course-wrapper",children:[Object(q.jsx)(he.a,{size:"medium",className:"course-title",children:(c=e.name,c.toUpperCase())}),Object(q.jsx)(Le.a.Group,{className:"card-group",children:(n=t.menuItems,a=e.name,n.filter((function(e){return e.course.name===a}))).map((function(e){return Object(q.jsx)(ze,{_id:e._id,image:e.image,name:e.name,price:e.price,description:e.description},e._id)}))})]},e._id);var n,a,c}))]})},Qe=function(){var e=Object(a.createRef)();return Object(q.jsx)(fe.a,{stackable:!0,columns:2,children:Object(q.jsx)(fe.a.Column,{children:Object(q.jsx)(ge.a,{innerRef:e,children:Object(q.jsxs)(b.a,{className:"menu",children:[Object(q.jsx)(Re,{}),Object(q.jsx)(xe.a,{position:"right",children:Object(q.jsx)(ve.a,{context:e,children:Object(q.jsx)(Fe,{})})})]})})})})},Be=function(){return Object(q.jsx)("div",{children:Object(q.jsx)("h1",{children:"404 Page Not Found"})})};t(161);var He=function(){var e=Object(a.useState)({email:"",password:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(y.b)(ee),i=Object(s.a)(r,2),l=i[0],u=i[1].error,d=function(){var e=Object(f.a)(p.a.mark((function e(n){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l({variables:{email:t.email,password:t.password}});case 4:a=e.sent,c=a.data.login.token,$e.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),j=function(e){var n=e.target,a=n.name,r=n.value;c(Object(x.a)(Object(x.a)({},t),{},Object(g.a)({},a,r)))};return Object(q.jsxs)("div",{className:"login-container",children:[Object(q.jsx)("h2",{className:"login-title",children:"Login"}),Object(q.jsxs)("form",{className:"login-form",onSubmit:d,children:[Object(q.jsxs)("div",{className:"ui input login-email",children:[Object(q.jsx)("label",{htmlFor:"email",className:"login-email-label",children:"Email Address:"}),Object(q.jsx)(ke.a,{placeholder:"example@email.com",name:"email",type:"email",id:"email",onChange:j})]}),Object(q.jsxs)("div",{className:"login-password",children:[Object(q.jsx)("label",{htmlFor:"password",className:"login-password-label",children:"Password:"}),Object(q.jsx)(ke.a,{placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",name:"password",type:"password",id:"pwd",onChange:j})]}),u?Object(q.jsx)("div",{children:Object(q.jsx)("p",{className:"login-error",children:"Incorrect login credentials. Please try again."})}):null,Object(q.jsx)("div",{className:"login-btn-container",children:Object(q.jsxs)(w.a,{animated:!0,id:"login-btn",children:[Object(q.jsx)(w.a.Content,{visible:!0,children:"Login"}),Object(q.jsx)(w.a.Content,{hidden:!0,children:Object(q.jsx)(h.a,{name:"arrow right"})})]})})]}),Object(q.jsx)("div",{children:Object(q.jsx)(o.b,{to:"/signup",children:Object(q.jsx)("p",{className:"login-createUser",children:"Don't have an account? Sign up \u2192"})})})]})},qe=t(116);var We=function(){var e=Y(),n=Object(s.a)(e,1)[0],t=Object(a.useState)(!1),c=Object(s.a)(t,2),r=c[0],i=c[1],o=n.user._id,l=j.a.messaging();return r?Object(q.jsxs)(qe.a,{as:"a",color:"red",children:["Turn notifications off",Object(q.jsx)(h.a,{className:"big","aria-label":"turn notifications off",name:"envelope open outline",onClick:function(){l.deleteToken(),i(!1),console.log("token removed")}})]}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(qe.a,{as:"a",color:"green",children:["Turn notifications on",Object(q.jsx)(h.a,{className:"big","aria-label":"turn notifications on",name:"envelope outline",onClick:function(){l.requestPermission().then((function(){return console.log("Have permission"),l.getToken()})).then((function(e){j.a.database().ref("users/"+o).set({firstName:n.user.firstName,lastName:n.user.lastName,token:e}).catch((function(e){console.error(e)})),console.log(e),i(!0)})).catch((function(e){console.log(e)}))}})]})})};var Ge=function(){var e=Y(),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(y.c)(Se),i=r.loading,l=r.data;return Object(a.useEffect)((function(){l&&c({type:$,user:l.user})}),[l,i,c]),Object(q.jsx)(he.a,{className:"block nav-container",children:Object(q.jsx)(fe.a,{className:"middle aligned",columns:3,divided:!0,children:Object(q.jsxs)(fe.a.Row,{children:[Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)("h1",{children:Object(q.jsx)(o.b,{to:"/",children:Object(q.jsx)("span",{role:"img","aria-label":"empty plate",children:"\ud83c\udf7d\ufe0fFood Baby"})})})}),function(){switch(!0){case"user"===t.user.role:return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)(o.b,{to:"/orderHistory",children:"Order History"})}),Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)("a",{href:"/",onClick:function(){return $e.logout()},children:"Logout"})}),Object(q.jsx)(We,{})]});case"owner"===t.user.role:return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)(o.b,{to:"/dashboard",children:"Owner Dashboard"})}),Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)("a",{href:"/",onClick:function(){return $e.logout()},children:"Logout"})})]});default:return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)(o.b,{to:"/signup",children:"Sign-Up"})}),Object(q.jsx)(fe.a.Column,{className:"navLinks",children:Object(q.jsx)(o.b,{to:"/Login",children:"Login"})})]})}}()]})})})};var Je=function(){var e,n=Object(y.c)(Se).data;return n&&(e=n.user),Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"container my-1",children:[Object(q.jsx)(o.b,{to:"/",children:"\u2190 Back to Menu Items"}),e?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("h2",{children:["Order History for ",e.firstName," ",e.lastName," "]}),e.orders.map((function(e){return Object(q.jsxs)("div",{className:"my-2",children:[Object(q.jsx)("h3",{children:new Date(parseInt(e.purchaseDate)).toLocaleDateString()}),Object(q.jsx)("div",{className:"flex-row",children:e.menuItems.map((function(e,n){var t=e._id,a=e.image,c=e.name,r=e.price;return Object(q.jsxs)("div",{className:"card px-1 py-1",children:[Object(q.jsxs)(o.b,{to:"/menuItems/".concat(t),children:[Object(q.jsx)("img",{alt:c,src:"/images/".concat(a)}),Object(q.jsx)("p",{children:c})]}),Object(q.jsx)("div",{children:Object(q.jsxs)("span",{children:["$",r]})})]},n)}))})]},e._id)}))]}):null]})})};var Ye=function(){var e=Object(a.useState)({email:"",password:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],r=Object(y.b)(te),i=Object(s.a)(r,2),l=i[0],u=i[1].error,d=function(){var e=Object(f.a)(p.a.mark((function e(n){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l({variables:{email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName}});case 4:a=e.sent,c=a.data.addUser.token,$e.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.message.includes("email: ")?console.log("Email is taken."):console.log("Something went wrong. Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),j=function(e){var n=e.target,a=n.name,r=n.value;c(Object(x.a)(Object(x.a)({},t),{},Object(g.a)({},a,r)))};return Object(q.jsxs)("div",{className:"login-container",children:[Object(q.jsx)("h2",{className:"login-title",children:"Sign Up"}),Object(q.jsxs)("form",{onSubmit:d,className:"create-form",children:[Object(q.jsxs)("div",{className:"ui input create-user",children:[Object(q.jsx)("label",{htmlFor:"firstName",className:"user-first-label",children:"First Name:"}),Object(q.jsx)(ke.a,{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:j})]}),Object(q.jsxs)("div",{className:"create-user",children:[Object(q.jsx)("label",{htmlFor:"lastName",className:"user-last-label",children:"Last Name:"}),Object(q.jsx)(ke.a,{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:j})]}),Object(q.jsxs)("div",{className:"create-user",children:[Object(q.jsx)("label",{htmlFor:"email",className:"create-email-label",children:"Email Address:"}),Object(q.jsx)(ke.a,{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:j})]}),Object(q.jsxs)("div",{className:"create-user",children:[Object(q.jsx)("label",{htmlFor:"pwd",className:"create-password-label",children:"Password:"}),Object(q.jsx)(ke.a,{placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",name:"password",type:"password",id:"pwd",onChange:j})]}),Object(q.jsx)("div",{className:"login-btn-container",children:Object(q.jsxs)(w.a,{animated:!0,id:"login-btn",children:[Object(q.jsx)(w.a.Content,{visible:!0,children:"Create Account"}),Object(q.jsx)(w.a.Content,{hidden:!0,children:Object(q.jsx)(h.a,{name:"arrow right"})})]})})]}),u?Object(q.jsx)("div",{children:Object(q.jsx)("p",{className:"createUser-error",children:"A User with these credentials already exist. Use the link below to sign in."})}):null,Object(q.jsx)("div",{className:"toLogin",children:Object(q.jsx)(o.b,{to:"/login",children:Object(q.jsx)("p",{className:"login-createUser",children:"\u2190 Back to Login Page"})})})]})};var Ve,Ke,Xe,Ze,en,nn=function(){var e=Object(y.b)(ae),n=Object(s.a)(e,1)[0];return Object(a.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var t,a,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("cart","get");case 2:if(t=e.sent,a=t.map((function(e){return e._id})),console.log("==============================",a),!a.length){e.next=16;break}return e.next=8,n({variables:{menuItems:a}});case 8:c=e.sent,r=c.data,i=r.addOrder.menuItems,console.log("====222222222222======",i),i.forEach((function(e){oe("cart","delete",e),console.log("====33333333333======",e)})),setTimeout((function(){window.location.assign("/")}),3e3),e.next=17;break;case 16:console.log("error");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{children:"Success!"}),Object(q.jsx)("h2",{children:"Thank you for your order!"}),Object(q.jsx)("h2",{children:"You will now be redirected to the homepage."})]})},tn=(t(217),{body:"#FFF",text:"#363537",toggleBorder:"#FFF",background:"#363537",a:"#2f5d62"}),an={body:"#363537",text:"#FAFAFA",toggleBorder:"#6B8096",background:"#999",a:"#ffb037",div:"#999"},cn=t(63),rn=Object(cn.b)(Ve||(Ve=Object(K.a)(["\n  body {\n    background: ",";\n    color: ",";\n    transition: all 0.50s linear;\n  }\n  & .ui.segment.menu {\n    background: ",";\n    color: ",";\n    border: 1px solid lightgrey\n   \n  }\n  & .ui.large.header.menu-title {\n    background: ",";\n    color: ",";\n  }\n  & .ui.medium.header.course-title {\n    background: ",";\n    color: ",";\n  }\n\n  & div.ui.segment.cart {\n    background: ",";\n    color: ",";\n    border: 1px solid lightgrey\n  }\n\n  & div.cart.body {\n    background: ",";\n    color: ",";\n  }\n\n  & ol.ui.list li:before {\n    background: ",";\n    color: ",";\n  }\n\n  & div.ui.medium.dividing.header {\n    background: ",";\n    color: ",";\n  }\n\n  & div.ui.small.header {\n    background: ",";\n    color: ",";\n  }\n\n  & li::before {\n    background: ",";\n    color: ",";\n}\n\n& label.login-email-label {\n  color: ",";\n  transition all .50s linear;\n}\n\n& label.user-first-label {\n  color: ",";\n  transition all .50s linear;\n}\n\n& .menu-cards {\n  background: ",";\n  color: ",";\n}\n\n& .login-createUser {\n  color: ",";\n}\n\n& .login-createUser:before {\n  background: ",";\n  color: ",";\n}\n\n& .checkout-link {\n  color: ",";\n}\n\n& .checkout-link:hover {\n  color: ",";\n}\n\n& .checkout-link:before {\n  background: ",";\n  color: ",";\n}\n\n& .close {\n  color: ",";\n}\n  "])),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a}),(function(e){return e.theme.a})),sn=cn.c.button(Ke||(Ke=Object(K.a)(["\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 0.5rem;\n  justify-content: space-between;\n  margin: 0 auto;\n  overflow: hidden;\n  padding: 0.5rem;\n  position: relative;\n  width: 4rem;\n  height: 4rem;\n  outline: none;\n  }\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.toggleBorder})),on=cn.c.div(Xe||(Xe=Object(K.a)(["\n  & .ui segment menu {\n    background: #A9A9A9\n  }\n\n  background: ",";\n"])),(function(e){return e.theme.background})),ln=cn.c.svg(Ze||(Ze=Object(K.a)(["\n height: auto;\n width: 2.5rem;\n transition: all 0.7s linear;\n"]))),un=cn.c.svg(en||(en=Object(K.a)(["\n  height: auto;\n  width: 2.5rem;\n  transition: all 0.7s linear;\n"]))),dn=function(e){var n=e.theme,t=e.toggleTheme;return Object(q.jsxs)(sn,{onClick:t,children:[Object(q.jsx)(on,{}),"light"===n?Object(q.jsx)(un,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{style:{fill:"#F6C358"},d:"M10.719 2.082c-2.572 2.028-4.719 5.212-4.719 9.918 0 4.569 1.938 7.798 4.548 9.895-4.829-.705-8.548-4.874-8.548-9.895 0-5.08 3.808-9.288 8.719-9.918zm1.281-2.082c-6.617 0-12 5.383-12 12s5.383 12 12 12c1.894 0 3.87-.333 5.37-1.179-3.453-.613-9.37-3.367-9.37-10.821 0-7.555 6.422-10.317 9.37-10.821-1.74-.682-3.476-1.179-5.37-1.179zm0 10.999c1.437.438 2.562 1.564 2.999 3.001.44-1.437 1.565-2.562 3.001-3-1.436-.439-2.561-1.563-3.001-3-.437 1.436-1.562 2.561-2.999 2.999zm8.001.001c.958.293 1.707 1.042 2 2.001.291-.959 1.042-1.709 1.999-2.001-.957-.292-1.707-1.042-2-2-.293.958-1.042 1.708-1.999 2zm-1-9c-.437 1.437-1.563 2.562-2.998 3.001 1.438.44 2.561 1.564 3.001 3.002.437-1.438 1.563-2.563 2.996-3.002-1.433-.437-2.559-1.564-2.999-3.001z"})}):Object(q.jsx)(ln,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{style:{fill:"#F6C358"},d:"M12 9c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762 0-5 2.238-5 5s2.238 5 5 5 5-2.238 5-5-2.238-5-5-5zm0-2c.34 0 .672.033 1 .08v-2.08h-2v2.08c.328-.047.66-.08 1-.08zm-4.184 1.401l-1.472-1.473-1.414 1.415 1.473 1.473c.401-.537.876-1.013 1.413-1.415zm9.782 1.414l1.473-1.473-1.414-1.414-1.473 1.473c.537.402 1.012.878 1.414 1.414zm-5.598 11.185c-.34 0-.672-.033-1-.08v2.08h2v-2.08c-.328.047-.66.08-1 .08zm4.185-1.402l1.473 1.473 1.415-1.415-1.473-1.472c-.403.536-.879 1.012-1.415 1.414zm-11.185-5.598c0-.34.033-.672.08-1h-2.08v2h2.08c-.047-.328-.08-.66-.08-1zm13.92-1c.047.328.08.66.08 1s-.033.672-.08 1h2.08v-2h-2.08zm-12.519 5.184l-1.473 1.473 1.414 1.414 1.473-1.473c-.536-.402-1.012-.877-1.414-1.414z"})})]})},jn=t(246),bn=new d.a({request:function(e){var n=localStorage.getItem("id_token");e.setContext({headers:{authorization:n?"Bearer ".concat(n):""}})},uri:"/graphql"});0===j.a.apps.length&&j.a.initializeApp({apiKey:"AIzaSyAPYUQl3v49glJc2H1WErSHVGgejiqEfxo",authDomain:"food-baby-682db.firebaseapp.com",databaseURL:"https://food-baby-682db-default-rtdb.firebaseio.com",projectId:"food-baby-682db",storageBucket:"food-baby-682db.appspot.com",messagingSenderId:"696002118688",appId:"1:696002118688:web:c7b3e92a1806d71bb92845",measurementId:"G-L9R64LNE17"});var mn=j.a.messaging();mn.onMessage((function(e){console.log("onMessage:",e)}));var hn=function(){var e=function(){var e=Object(a.useState)("light"),n=Object(s.a)(e,2),t=n[0],c=n[1],r=function(e){window.localStorage.setItem("theme",e),c(e)};return Object(a.useEffect)((function(){var e=window.localStorage.getItem("theme");e&&c(e)}),[]),[t,function(){r("light"===t?"dark":"light")}]}(),n=Object(s.a)(e,2),t=n[0],c=n[1],r="light"===t?tn:an,i=Object(a.useState)(!1),d=Object(s.a)(i,2),j=d[0],b=d[1],m=Object(a.useState)({title:"",body:""}),h=Object(s.a)(m,2),O=h[0],p=h[1];return new Promise((function(e){mn.onMessage((function(n){e(n)}))})).then((function(e){b(!0),p({title:e.notification.title,body:e.notification.body}),console.log(e)})).catch((function(e){return console.log("failed: ",e)})),Object(q.jsxs)(u.a,{client:bn,children:[Object(q.jsx)(o.a,{children:Object(q.jsx)(cn.a,{theme:r,children:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(rn,{}),Object(q.jsxs)("div",{children:[Object(q.jsx)(dn,{theme:t,toggleTheme:c}),Object(q.jsxs)(J,{children:[Object(q.jsx)(Ge,{}),j&&Object(q.jsx)(jn.a,{onDismiss:function(){b(!1)},show:j,delay:100,header:O.title,content:O.body}),Object(q.jsxs)(l.c,{children:[Object(q.jsx)(l.a,{exact:!0,path:"/",component:Qe}),Object(q.jsx)(l.a,{exact:!0,path:"/dashboard",component:pe}),Object(q.jsx)(l.a,{exact:!0,path:"/login",component:He}),Object(q.jsx)(l.a,{exact:!0,path:"/orderHistory",component:Je}),Object(q.jsx)(l.a,{exact:!0,path:"/signup",component:Ye}),Object(q.jsx)(l.a,{exact:!0,path:"/success",component:nn}),Object(q.jsx)(l.a,{component:Be})]})]})]})]})})}),Object(q.jsx)("script",{src:"https://www.gstatic.com/firebasejs/8.3.2/firebase-messaging.js"}),Object(q.jsx)("script",{src:"https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"})]})},On=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(hn,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");On?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):pn(n,e)}))}}()}},[[224,1,2]]]);
//# sourceMappingURL=main.1b2884f8.chunk.js.map